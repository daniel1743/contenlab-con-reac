# ğŸ’ Sistema de CrÃ©ditos CreoVision - ConfiguraciÃ³n Completa

**Fecha**: 10 de Noviembre 2025
**Modelo**: Siempre ganancia, nunca pÃ©rdida
**FilosofÃ­a**: SatisfacciÃ³n del cliente + rentabilidad sostenible

---

## ğŸ¯ RESUMEN EJECUTIVO

### Principios del sistema:
1. **NADA ES GRATIS**: Toda acciÃ³n consume crÃ©ditos
2. **Transparencia total**: Usuario sabe cuÃ¡nto cuesta cada acciÃ³n ANTES de hacerla
3. **PercepciÃ³n de valor**: Features caras = mucho valor, features baratas = uso frecuente
4. **Margen del 85-92%**: Garantiza rentabilidad incluso con usuarios power
5. **Rollover limitado**: Evita acumulaciÃ³n excesiva

---

## ğŸ“Š TABLA MAESTRA DE CRÃ‰DITOS POR FEATURE

### ğŸ”¥ Features Premium (Alto costo)

| Feature | CrÃ©ditos | Costo real | Margen | APIs usadas | Frecuencia esperada |
|---------|----------|------------|--------|-------------|---------------------|
| **Growth Dashboard** | 380 | $0.15 | 99.96% | YouTube + Gemini 2.0 + News + Cache | 1-3x/mes |
| **Competitor Analysis** | 200 | $0.12 | 99.94% | YouTube + Gemini + QWEN | 2-5x/mes |
| **AnÃ¡lisis de Tendencias** | 150 | $0.08 | 99.95% | YouTube + News + DeepSeek | 3-7x/mes |
| **AnÃ¡lisis de Canal Completo** | 120 | $0.07 | 99.94% | YouTube + Gemini | 2-4x/mes |
| **Predictor de Viralidad** | 100 | $0.06 | 99.94% | YouTube + QWEN + Reddit | 5-10x/mes |

### ğŸ’¼ Features Intermedias (Costo medio)

| Feature | CrÃ©ditos | Costo real | Margen | APIs usadas | Frecuencia esperada |
|---------|----------|------------|--------|-------------|---------------------|
| **PersonalizaciÃ³n Plus** | 50 | $0.02 | 99.96% | Gemini/DeepSeek | 10-20x/mes |
| **SEO Coach** | 45 | $0.018 | 99.96% | Gemini | 5-10x/mes |
| **AnÃ¡lisis de Video Individual** | 30 | $0.015 | 99.95% | DeepSeek/QWEN | 15-30x/mes |
| **GeneraciÃ³n Hashtags** | 25 | $0.01 | 99.96% | Gemini AI | 20-40x/mes |
| **GuiÃ³n Viral (bÃ¡sico)** | 20 | $0.008 | 99.96% | DeepSeek/QWEN | 30-60x/mes |

### âš¡ Features BÃ¡sicas (Bajo costo - uso frecuente)

| Feature | CrÃ©ditos | Costo real | Margen | APIs usadas | Frecuencia esperada |
|---------|----------|------------|--------|-------------|---------------------|
| **Weekly Trends** | 15 | $0.005 | 99.97% | News API + Cache | 7-14x/mes |
| **Re-generar guiÃ³n** | 10 | $0.004 | 99.96% | QWEN (cache) | 50-100x/mes |
| **AnÃ¡lisis de tÃ­tulo** | 8 | $0.003 | 99.96% | DeepSeek | 40-80x/mes |
| **BÃºsqueda de tendencias** | 5 | $0.002 | 99.96% | News API | 100-200x/mes |
| **Consultar historial** | 2 | $0.001 | 99.95% | Supabase | Ilimitado |

### ğŸ†• Features Nuevas (Por implementar)

| Feature | CrÃ©ditos | Costo real | Margen | APIs usadas | Frecuencia esperada |
|---------|----------|------------|--------|-------------|---------------------|
| **AnÃ¡lisis Reddit** | 60 | $0.03 | 99.95% | Reddit API + Gemini | 5-10x/mes |
| **Thumbnail AI Analysis** | 40 | $0.02 | 99.95% | Gemini Vision | 10-20x/mes |
| **Thread Composer IA** | 35 | $0.017 | 99.95% | DeepSeek | 10-20x/mes |
| **Calendario inteligente** | 25 | $0.012 | 99.95% | Gemini | 5-10x/mes |
| **AnÃ¡lisis de comentarios** | 50 | $0.025 | 99.95% | YouTube + DeepSeek | 5-10x/mes |

---

## ğŸ’° PLANES Y PAQUETES OPTIMIZADOS

### Plan FREE (AdquisiciÃ³n)
```
ğŸ’ 150 crÃ©ditos/mes
ğŸ¯ Objetivo: ConversiÃ³n a Starter (meta 3-5%)
ğŸ“Š Costo promedio: $0.075/usuario
```

**QuÃ© puede hacer:**
- âœ… 7x Guiones virales bÃ¡sicos (140 crÃ©ditos)
- âœ… 6x Hashtags (150 crÃ©ditos)
- âœ… 5x AnÃ¡lisis de tÃ­tulo (40 crÃ©ditos)
- âœ… 30x BÃºsqueda tendencias (150 crÃ©ditos)
- âœ… 10x Weekly Trends (150 crÃ©ditos)
- âŒ NO Growth Dashboard
- âŒ NO Competitor Analysis
- âŒ NO PersonalizaciÃ³n Plus

**Mensaje de valor**: "Perfecto para probar CreoVision y crear tu primer contenido viral"

---

### Plan STARTER ($6/mes)
```
ğŸ’ 1000 crÃ©ditos/mes
ğŸ’µ Precio: $6 USD / $5.400 CLP
ğŸ¯ Objetivo: Creadores casuales, experimentadores
ğŸ“Š Costo promedio: $0.50/usuario
ğŸ“ˆ Margen: 92%
```

**QuÃ© puede hacer:**
- âœ… 2x Growth Dashboard (760 crÃ©ditos)
- âœ… 3x Competitor Analysis (600 crÃ©ditos)
- âœ… 50x Guiones virales (1000 crÃ©ditos)
- âœ… 40x Hashtags (1000 crÃ©ditos)
- âœ… 20x PersonalizaciÃ³n Plus (1000 crÃ©ditos)
- âœ… 66x Weekly Trends (990 crÃ©ditos)
- âœ… Rollover hasta 500 crÃ©ditos

**Mensaje de valor**: "Para creadores que publican 2-4 veces por semana"

---

### Plan PRO ($15/mes) â­ **MÃS POPULAR**
```
ğŸ’ 3000 crÃ©ditos/mes
ğŸ’µ Precio: $15 USD / $13.500 CLP
ğŸ¯ Objetivo: Creadores serios, pequeÃ±os equipos
ğŸ“Š Costo promedio: $1.50/usuario
ğŸ“ˆ Margen: 90%
```

**QuÃ© puede hacer:**
- âœ… 7x Growth Dashboard (2660 crÃ©ditos)
- âœ… 10x Competitor Analysis (2000 crÃ©ditos)
- âœ… 150x Guiones virales (3000 crÃ©ditos)
- âœ… 120x Hashtags (3000 crÃ©ditos)
- âœ… 60x PersonalizaciÃ³n Plus (3000 crÃ©ditos)
- âœ… 20x AnÃ¡lisis de video (600 crÃ©ditos)
- âœ… 6x AnÃ¡lisis Reddit (360 crÃ©ditos)
- âœ… Rollover hasta 1500 crÃ©ditos
- âœ… Prioridad en soporte

**Mensaje de valor**: "Para creadores profesionales que publican diariamente"

---

### Plan PREMIUM ($30/mes)
```
ğŸ’ 8000 crÃ©ditos/mes
ğŸ’µ Precio: $30 USD / $27.000 CLP
ğŸ¯ Objetivo: Power users, agencias pequeÃ±as
ğŸ“Š Costo promedio: $4.00/usuario
ğŸ“ˆ Margen: 87%
```

**QuÃ© puede hacer:**
- âœ… 21x Growth Dashboard (7980 crÃ©ditos)
- âœ… 40x Competitor Analysis (8000 crÃ©ditos)
- âœ… 400x Guiones virales (8000 crÃ©ditos)
- âœ… 320x Hashtags (8000 crÃ©ditos)
- âœ… 160x PersonalizaciÃ³n Plus (8000 crÃ©ditos)
- âœ… 80x AnÃ¡lisis de video (2400 crÃ©ditos)
- âœ… 50x AnÃ¡lisis de tendencias (7500 crÃ©ditos)
- âœ… 13x AnÃ¡lisis Reddit (780 crÃ©ditos)
- âœ… Rollover hasta 4000 crÃ©ditos
- âœ… Soporte prioritario 24/7
- âœ… Acceso early a nuevas features

**Mensaje de valor**: "Poder ilimitado para equipos y agencias de contenido"

---

### Plan ENTERPRISE ($65/mes)
```
ğŸ’ 20000 crÃ©ditos/mes
ğŸ’µ Precio: $65 USD / $58.500 CLP
ğŸ¯ Objetivo: Agencias, empresas, equipos grandes
ğŸ“Š Costo promedio: $10.00/usuario
ğŸ“ˆ Margen: 85%
```

**QuÃ© puede hacer:**
- âœ… 52x Growth Dashboard (19760 crÃ©ditos)
- âœ… 100x Competitor Analysis (20000 crÃ©ditos)
- âœ… 1000x Guiones virales (20000 crÃ©ditos)
- âœ… AnÃ¡lisis ilimitado de tendencias
- âœ… Rollover hasta 10000 crÃ©ditos
- âœ… API access
- âœ… Custom integrations
- âœ… Dedicated account manager
- âœ… White-label option

**Mensaje de valor**: "SoluciÃ³n enterprise para operaciones de contenido a escala"

---

## ğŸ—„ï¸ SQL PARA SUPABASE - COPIAR Y PEGAR

### Paso 1: Limpiar y crear paquetes de crÃ©ditos

```sql
-- ============================================
-- 1. LIMPIAR PAQUETES ANTERIORES
-- ============================================
DELETE FROM public.credit_packages;

-- ============================================
-- 2. CREAR PAQUETES DE SUSCRIPCIÃ“N
-- ============================================
INSERT INTO public.credit_packages (
  slug,
  name,
  total_credits,
  price_usd,
  price_clp,
  description,
  features,
  is_active,
  is_popular,
  sort_order
) VALUES

-- Plan FREE
('free', 'Free', 150, 0.00, 0,
 'Perfecto para probar CreoVision',
 ARRAY[
   '150 crÃ©ditos/mes',
   '7 guiones virales',
   '6 packs de hashtags',
   'BÃºsquedas de tendencias ilimitadas',
   'Soporte por email',
   'Acceso a herramientas bÃ¡sicas'
 ],
 true, false, 1),

-- Plan STARTER
('starter', 'Starter', 1000, 6.00, 5400,
 'Para creadores que publican 2-4 veces por semana',
 ARRAY[
   '1000 crÃ©ditos/mes',
   'Rollover hasta 500 crÃ©ditos',
   '2 anÃ¡lisis Growth Dashboard',
   '50 guiones virales optimizados',
   '40 packs de hashtags',
   '20 personalizaciones avanzadas',
   'Soporte prioritario',
   'Acceso a todas las herramientas'
 ],
 true, false, 2),

-- Plan PRO (MÃS POPULAR)
('pro', 'Pro', 3000, 15.00, 13500,
 'Para creadores profesionales que publican diariamente',
 ARRAY[
   '3000 crÃ©ditos/mes',
   'Rollover hasta 1500 crÃ©ditos',
   '7 anÃ¡lisis Growth Dashboard',
   '10 anÃ¡lisis de competencia',
   '150 guiones virales',
   '60 personalizaciones avanzadas',
   '20 anÃ¡lisis de video individual',
   'Prioridad en soporte',
   'Acceso anticipado a nuevas features'
 ],
 true, true, 3),

-- Plan PREMIUM
('premium', 'Premium', 8000, 30.00, 27000,
 'Poder ilimitado para equipos y agencias',
 ARRAY[
   '8000 crÃ©ditos/mes',
   'Rollover hasta 4000 crÃ©ditos',
   '21 anÃ¡lisis Growth Dashboard',
   '40 anÃ¡lisis de competencia',
   '400 guiones virales',
   '160 personalizaciones avanzadas',
   '80 anÃ¡lisis de video',
   '50 anÃ¡lisis de tendencias',
   'Soporte 24/7 prioritario',
   'Acceso anticipado exclusivo',
   'SesiÃ³n de onboarding 1-on-1'
 ],
 true, false, 4),

-- Plan ENTERPRISE
('enterprise', 'Enterprise', 20000, 65.00, 58500,
 'SoluciÃ³n enterprise para operaciones a escala',
 ARRAY[
   '20000 crÃ©ditos/mes',
   'Rollover hasta 10000 crÃ©ditos',
   '52+ anÃ¡lisis Growth Dashboard',
   '100+ anÃ¡lisis de competencia',
   'Guiones ilimitados',
   'AnÃ¡lisis ilimitado de tendencias',
   'API access',
   'Custom integrations',
   'Dedicated account manager',
   'White-label option',
   'SLA garantizado 99.9%',
   'FacturaciÃ³n personalizada'
 ],
 true, false, 5);

-- ============================================
-- 3. VERIFICAR QUE SE CREARON CORRECTAMENTE
-- ============================================
SELECT slug, name, total_credits, price_usd, is_popular
FROM public.credit_packages
ORDER BY sort_order;
```

---

### Paso 2: Crear tabla de costos de features

```sql
-- ============================================
-- TABLA DE COSTOS POR FEATURE
-- ============================================
CREATE TABLE IF NOT EXISTS public.feature_costs (
  id SERIAL PRIMARY KEY,
  feature_slug VARCHAR(100) UNIQUE NOT NULL,
  feature_name VARCHAR(255) NOT NULL,
  credit_cost INTEGER NOT NULL,
  estimated_api_cost DECIMAL(10, 4) DEFAULT 0,
  category VARCHAR(50) DEFAULT 'basic',
  description TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Eliminar datos anteriores si existen
TRUNCATE TABLE public.feature_costs;

-- Insertar costos de features
INSERT INTO public.feature_costs (feature_slug, feature_name, credit_cost, estimated_api_cost, category, description) VALUES
-- Features Premium
('growth_dashboard', 'Growth Dashboard', 380, 0.15, 'premium', 'AnÃ¡lisis completo de crecimiento con YouTube + Gemini + News API'),
('competitor_analysis', 'AnÃ¡lisis de Competencia', 200, 0.12, 'premium', 'AnÃ¡lisis profundo de competidores con YouTube + Gemini'),
('trend_analysis', 'AnÃ¡lisis de Tendencias', 150, 0.08, 'premium', 'IdentificaciÃ³n de tendencias con YouTube + News + DeepSeek'),
('channel_analysis', 'AnÃ¡lisis de Canal Completo', 120, 0.07, 'premium', 'AnÃ¡lisis exhaustivo de canal con YouTube + Gemini'),
('virality_predictor', 'Predictor de Viralidad', 100, 0.06, 'premium', 'PredicciÃ³n de viralidad con YouTube + QWEN + Reddit'),

-- Features Intermedias
('personalization_plus', 'PersonalizaciÃ³n Plus', 50, 0.02, 'intermediate', 'PersonalizaciÃ³n avanzada con Gemini/DeepSeek'),
('seo_coach', 'SEO Coach', 45, 0.018, 'intermediate', 'OptimizaciÃ³n SEO con Gemini'),
('video_analysis', 'AnÃ¡lisis de Video', 30, 0.015, 'intermediate', 'AnÃ¡lisis individual de video con DeepSeek/QWEN'),
('hashtag_generation', 'GeneraciÃ³n de Hashtags', 25, 0.01, 'intermediate', 'GeneraciÃ³n optimizada de hashtags con Gemini'),
('viral_script_basic', 'GuiÃ³n Viral BÃ¡sico', 20, 0.008, 'intermediate', 'GeneraciÃ³n de guiÃ³n con DeepSeek/QWEN'),

-- Features BÃ¡sicas
('weekly_trends', 'Weekly Trends', 15, 0.005, 'basic', 'Tendencias semanales con News API + Cache'),
('regenerate_script', 'Re-generar GuiÃ³n', 10, 0.004, 'basic', 'RegeneraciÃ³n con QWEN (cache)'),
('title_analysis', 'AnÃ¡lisis de TÃ­tulo', 8, 0.003, 'basic', 'AnÃ¡lisis de tÃ­tulo con DeepSeek'),
('trend_search', 'BÃºsqueda de Tendencias', 5, 0.002, 'basic', 'BÃºsqueda con News API'),
('history_query', 'Consultar Historial', 2, 0.001, 'basic', 'Consulta a Supabase'),

-- Features Nuevas
('reddit_analysis', 'AnÃ¡lisis Reddit', 60, 0.03, 'premium', 'AnÃ¡lisis de Reddit con Reddit API + Gemini'),
('thumbnail_ai', 'Thumbnail AI Analysis', 40, 0.02, 'intermediate', 'AnÃ¡lisis de thumbnail con Gemini Vision'),
('thread_composer', 'Thread Composer IA', 35, 0.017, 'intermediate', 'ComposiciÃ³n de threads con DeepSeek'),
('smart_calendar', 'Calendario Inteligente', 25, 0.012, 'intermediate', 'Calendario optimizado con Gemini'),
('comment_analysis', 'AnÃ¡lisis de Comentarios', 50, 0.025, 'premium', 'AnÃ¡lisis de engagement con YouTube + DeepSeek');

-- Verificar
SELECT feature_slug, feature_name, credit_cost, category
FROM public.feature_costs
ORDER BY credit_cost DESC;
```

---

### Paso 3: FunciÃ³n para obtener costo de feature

```sql
-- ============================================
-- FUNCIÃ“N: Obtener costo de un feature
-- ============================================
CREATE OR REPLACE FUNCTION get_feature_cost(p_feature_slug VARCHAR)
RETURNS INTEGER AS $$
DECLARE
  v_cost INTEGER;
BEGIN
  SELECT credit_cost INTO v_cost
  FROM public.feature_costs
  WHERE feature_slug = p_feature_slug AND is_active = true;

  -- Si no encuentra, retornar costo por defecto
  IF v_cost IS NULL THEN
    RETURN 10; -- Costo por defecto
  END IF;

  RETURN v_cost;
END;
$$ LANGUAGE plpgsql;

-- Ejemplo de uso:
-- SELECT get_feature_cost('growth_dashboard'); -- Retorna 380
-- SELECT get_feature_cost('viral_script_basic'); -- Retorna 20
```

---

## ğŸ“‹ CHECKLIST DE IMPLEMENTACIÃ“N

### Backend (Supabase):
- [ ] Ejecutar SQL de credit_packages
- [ ] Ejecutar SQL de feature_costs
- [ ] Crear funciÃ³n get_feature_cost()
- [ ] Verificar que add_credits() existe
- [ ] Verificar que consume_credits() existe
- [ ] Crear trigger para rollover mensual
- [ ] Crear vista de analytics por feature

### Frontend (React):
- [ ] Actualizar PricingSection.jsx con nuevos planes
- [ ] Agregar badges de crÃ©ditos en TODAS las herramientas
- [ ] Mostrar costo ANTES de ejecutar acciÃ³n
- [ ] ConfirmaciÃ³n cuando costo > 100 crÃ©ditos
- [ ] Actualizar Tools.jsx con todos los costos
- [ ] Actualizar DashboardDynamic.jsx con costos
- [ ] Crear tooltip explicando quÃ© incluye cada feature

### Testing:
- [ ] Verificar que TODAS las features consumen crÃ©ditos
- [ ] Probar que usuario sin crÃ©ditos ve modal de upgrade
- [ ] Verificar rollover funciona correctamente
- [ ] Confirmar que MercadoPago agrega crÃ©ditos al pagar
- [ ] Testing de lÃ­mites (intentar consumir mÃ¡s de lo disponible)

---

## ğŸš¨ PRÃ“XIMOS PASOS (EN ORDEN)

1. **Ejecutar SQL en Supabase** (5 min)
2. **Actualizar archivo de constantes de crÃ©ditos** (10 min)
3. **Actualizar todas las features con consumo** (30 min)
4. **Actualizar PricingSection con nuevos planes** (20 min)
5. **Testing completo** (1 hora)

Â¿Listo para ejecutar? ğŸš€
